---
layout: post
title: ROADS
---
**N**ä¸ªåŸå¸‚ï¼Œç¼–å·1åˆ°Nã€‚åŸå¸‚é—´æœ‰**R**æ¡**å•å‘**é“è·¯ã€‚æ¯æ¡é“è·¯è¿æ¥ä¸¤ä¸ªåŸå¸‚ï¼Œæœ‰é•¿åº¦å’Œè¿‡è·¯è´¹ä¸¤ä¸ªå±æ€§ã€‚Bobåªæœ‰**K**å—é’±ï¼Œä»–æƒ³ä»åŸå¸‚1èµ°åˆ°åŸå¸‚Nã€‚é—®**æœ€çŸ­**å…±éœ€è¦èµ°å¤šé•¿çš„è·¯ã€‚å¦‚æœåˆ°ä¸äº†Nï¼Œè¾“å‡º-1<br>
2<=N<=100 0<=K<=10000 1<=R<=10000 æ¯æ¡è·¯çš„é•¿åº¦L, 1 <= L <= 100 æ¯æ¡è·¯çš„è¿‡è·¯è´¹T , 0 <= T <= 100

<br>
è¾“å…¥ï¼š
    K
    N
    R
    s1 e1 L1 T1
    s2 e2 L2 T2
    ...
    sR eR LR TR       s eæ˜¯è·¯èµ·ç‚¹å’Œç»ˆç‚¹

### ğŸŒ DFSæœç´¢+å‰ªæ
```c++
#include <iostream>
#include <vector>
#include <cmath>
#include <cstring>
#include <algorithm>

using namespace std;
const int MaxN = 110;
const int MaxC = 10010;

struct Road{
    int d, l, t;
};

int K, N, R;
vector< Road > G[MaxN];

int minLen;
int minCost;
int totalLen, totalCost;

int visited[MaxN];  // åŸå¸‚æ˜¯å¦å·²ç»èµ°è¿‡
int midL[MaxN][MaxC];   // èµ°åˆ°åŸå¸‚iæ°å¥½èŠ±è´¹cæ‰€èµ°è¿‡çš„è·¯ç¨‹é•¿åº¦
void Dfs(int s)
{
    visited[s] = 1; // æ ‡è®°è¯¥åŸå¸‚è®¿é—®è¿‡
    if( s == N )    // èµ°åˆ°ç»ˆç‚¹
    {
        minLen = min(minLen, totalLen);
        return;
    }
    // å¯¹åŸå¸‚iæœªè®¿é—®è¿‡çš„é‚»æ¥ç‚¹è¿›è¡Œéå†
    for(int i = 0; i < G[s].size(); ++i)
    {
        int d = G[s][i].d;
        if(!visited[d])
        {
            if(totalCost + G[s][i].t > K)
                continue;
            if(totalLen+G[s][i].l > minLen || totalLen+G[s][i].l > midL[d][totalCost+G[s][i].t])
                continue;
            totalCost += G[s][i].t;
            totalLen += G[s][i].l;
            midL[d][totalCost] = totalLen;
            Dfs(d); // ä»åŸå¸‚dç»§ç»­å‘ä¸‹èµ°
            visited[d] = 0;
            totalCost -= G[s][i].t;
            totalLen -= G[s][i].l;
        }
    }
}

int main()
{
    cin >> K >> N >> R;
    
    for(int i = 0; i < R; ++i)
    {
        int s;
        cin >> s;
        Road r;
        cin>> r.d >> r.l >> r.t;  
        if(s != r.d)
            G[s].push_back(r);
    }
    memset(visited, 0, sizeof(visited));
    for(int i = 0; i < MaxN; ++i)
    {
        for(int j = 0; j < MaxC; ++j)
        {
            midL[i][j] = 1<<30;         
        }
    }
    totalLen = 0;
    totalCost = 0;
    minLen = 1 << 30;
    Dfs(1); // ä»åŸå¸‚1å‡ºå‘èµ°åˆ°åŸå¸‚Nï¼Œå¯»æ‰¾æœ€çŸ­è·¯å¾„
    if(minLen < (1<<30))
        cout << minLen;
    else
    {
        cout << "-1";
    }
    return 0;
}
```